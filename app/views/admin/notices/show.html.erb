<div>
  <div class="page-header clearfix">
    <h3 class="pull-left"><%= @notice.title %></h3>
    <div class="pull-right margin-top15">
      <%= link_to "수정", edit_admin_notice_path(@notice), class: "btn btn-default btn-sm" %>
      <%= link_to "삭제", admin_notice_path(@notice), method: :delete,
      data: { confirm: '정말 삭제하시겠어요?' }, class: "btn btn-danger btn-sm" %>
    </div>
  </div>


  <p>공지 내용 : <%= @notice.content %></p>
  <p>실제 공지 주소 : <%= link_to @notice.link, @notice.link, target: "_blank" %></p>
  <p>통합 공지 주소 : <%= link_to @notice.shortenURL, @notice.shortenURL, target: "_blank" %></p>
  <p>만든 시간 : <%= @notice.created_at.localtime.strftime("%Y-%m-%d %T") %></p>
  <div class="notice-reader">
    <h3>읽은 회원 <small>(총 <%= @notice.readers.count %>명)</small></h3>
    <div class="table-responsive">
      <table class="table table-condensed">
        <thead>
          <tr>
            <th>기수</th>
            <th>이름</th>
            <th>전화번호</th>
            <th>이메일</th>
            <th>전공</th>
            <th>읽은 시간</th>
          </tr>
        </thead>
        <tbody>
          <% @notice.readers.order(generation_id: :desc).each do |user| %>
          <tr>
            <td class="text-right"><%= pretty_generation_id(user.generation_id) %></td>
            <td><%= user.username %></td>
            <td><%= pretty_phone_number(user.phone_number) %></td>
            <td><%= user.email %></td>
            <td><%= user.major %></td>
            <td><%= user.read_at(@notice).localtime.strftime("%Y-%m-%d %T") %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="notice-unreader">
    <h3>안 읽은 회원 <small>(총 <%= @notice.unreaders.count %>명)</small></h3>
    <div class="table-responsive">
      <table class="table table-condensed">
        <thead>
          <tr>
            <th>기수</th>
            <th>이름</th>
            <th>전화번호</th>
            <th>이메일</th>
            <th>전공</th>
            <th>읽은 시간</th>
          </tr>
        </thead>
        <tbody>
          <% @notice.unreaders.order(generation_id: :desc).each do |user| %>
          <tr>
            <td><%= pretty_generation_id(user.generation_id) %></td>
            <td><%= user.username %></td>
            <td><%= pretty_phone_number(user.phone_number) %></td>
            <td><%= user.email %></td>
            <td><%= user.major %></td>
            <td>-</td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>